
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recipes &#8212; py2app 2.0a0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Implementation Details" href="implementation.html" />
    <link rel="prev" title="py2app Setuptools Configuration" href="options.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="implementation.html" title="Implementation Details"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="options.html" title="py2app Setuptools Configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">py2app 2.0a0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Recipes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="recipes">
<h1>Recipes<a class="headerlink" href="#recipes" title="Permalink to this headline">¶</a></h1>
<p>py2app includes a mechanism for working around package incompatibilities,
and stripping unwanted dependencies automatically. These are called recipes.</p>
<p>A future version of py2app will support packaging of <a class="reference external" href="http://peak.telecommunity.com/DevCenter/PythonEggs">Python Eggs</a>. Once
this is established, recipes will be obsolete since eggs contain all of the
metadata needed to build a working standalone application.</p>
<div class="section" id="common-causes-for-incompatibility">
<h2>Common causes for incompatibility<a class="headerlink" href="#common-causes-for-incompatibility" title="Permalink to this headline">¶</a></h2>
<p>Some Python packages are written in such a way that they aren’t compatible
with being packaged. There are two main causes of this:</p>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">__import__</span></code> or otherwise importing code without usage of the
<code class="docutils literal notranslate"><span class="pre">import</span></code> statement.</p></li>
<li><p>Requiring in-package data files</p></li>
</ul>
</div>
<div class="section" id="built-in-recipes">
<h2>Built-in recipes<a class="headerlink" href="#built-in-recipes" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cjkcodecs</span></code>:</dt><dd><p>All codecs in the package are imported.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">docutils</span></code>:</dt><dd><p>Several of its internal components are automatically imported
(<code class="docutils literal notranslate"><span class="pre">languages</span></code>, <code class="docutils literal notranslate"><span class="pre">parsers</span></code>, <code class="docutils literal notranslate"><span class="pre">readers</span></code>, <code class="docutils literal notranslate"><span class="pre">writers</span></code>,
<code class="docutils literal notranslate"><span class="pre">parsers.rst.directives</span></code>, <code class="docutils literal notranslate"><span class="pre">parsers.rst.langauges</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>:</dt><dd><p>A dependency on <code class="docutils literal notranslate"><span class="pre">pytz.zoneinfo.UTC</span></code> is implied, and the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>
package is included in its entirety out of the zip file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">numpy</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">numpy</span></code> package is included in its entirety out of the zip file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PIL</span></code>:</dt><dd><p>Locates and includes all image plugins (Python modules that end with
<code class="docutils literal notranslate"><span class="pre">ImagePlugin.py</span></code>), removes unwanted dependencies on <code class="docutils literal notranslate"><span class="pre">Tkinter</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pydoc</span></code>:</dt><dd><p>The implicit references on the several modules are removed (<code class="docutils literal notranslate"><span class="pre">Tkinter</span></code>,
<code class="docutils literal notranslate"><span class="pre">tty</span></code>, <code class="docutils literal notranslate"><span class="pre">BaseHTTPServer</span></code>, <code class="docutils literal notranslate"><span class="pre">mimetools</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">threading</span></code>,
<code class="docutils literal notranslate"><span class="pre">ic</span></code>, <code class="docutils literal notranslate"><span class="pre">getopt</span></code>, <code class="docutils literal notranslate"><span class="pre">nturl2path</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pygame</span></code>:</dt><dd><p>Several data files that are included in the zip file where <code class="docutils literal notranslate"><span class="pre">pygame</span></code> can
find them (<code class="docutils literal notranslate"><span class="pre">freesansbold.ttf</span></code>, <code class="docutils literal notranslate"><span class="pre">pygame_icon.tiff</span></code>,
<code class="docutils literal notranslate"><span class="pre">pygame_icon.icns</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PyOpenGL</span></code>:</dt><dd><p>If the installed version of PyOpenGL reads a <code class="docutils literal notranslate"><span class="pre">version</span></code> file to determine
its version, then the <code class="docutils literal notranslate"><span class="pre">OpenGL</span></code> package is included in its entirety out of
the zip file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scipy</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">scipy</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy</span></code> packages are included in their entirety
out of the zip file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sip</span></code>:</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">sip</span></code> is detected, then all sip-using packages are included
(e.g. PyQt).</p>
</dd>
</dl>
</div>
<div class="section" id="developing-recipes">
<h2>Developing Recipes<a class="headerlink" href="#developing-recipes" title="Permalink to this headline">¶</a></h2>
<p>py2app currently searches for recipes only in the <code class="docutils literal notranslate"><span class="pre">py2app.recipes</span></code> module.
A recipe is an object that implements a <code class="docutils literal notranslate"><span class="pre">check(py2app_cmd,</span> <span class="pre">modulegraph)</span></code>
method.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">py2app_cmd</span></code>:</dt><dd><p>The py2app command instance (a subclass of <code class="docutils literal notranslate"><span class="pre">setuptools.Command</span></code>).
See the source for <code class="docutils literal notranslate"><span class="pre">py2app.build_app</span></code> for reference.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">modulegraph</span></code>:</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">modulegraph.modulegraph.ModuleGraph</span></code> instance.</p>
</dd>
</dl>
<p>A recipe should return either <code class="docutils literal notranslate"><span class="pre">None</span></code> or a <code class="docutils literal notranslate"><span class="pre">dict</span></code> instance.</p>
<p>If a recipe returns <code class="docutils literal notranslate"><span class="pre">None</span></code> it should not have performed any actions with
side-effects, and it may be called again zero or more times.</p>
<p>If a recipe returns a <code class="docutils literal notranslate"><span class="pre">dict</span></code> instance, it will not be called again. The
returned <code class="docutils literal notranslate"><span class="pre">dict</span></code> may have any of these optional string keys:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filters</span></code>:</dt><dd><p>A list of filter functions to be called with every module in the
modulegraph during flattening. If the filter returns False, the module
and any of its dependencies will not be included in the output. This is
similar in purpose to the <code class="docutils literal notranslate"><span class="pre">excludes</span></code> option, but can be any predicate
(e.g. to exclude all modules in a given path).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loader_files</span></code>:</dt><dd><p>Used to include data files inside the <code class="docutils literal notranslate"><span class="pre">site-packages.zip</span></code>. This is a
list of 2-tuples: <code class="docutils literal notranslate"><span class="pre">[(subdir,</span> <span class="pre">files),</span> <span class="pre">...]</span></code>. <code class="docutils literal notranslate"><span class="pre">subdir</span></code> is the path
within <code class="docutils literal notranslate"><span class="pre">site-packages.zip</span></code> and <code class="docutils literal notranslate"><span class="pre">files</span></code> is the list of files to include
in that directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">packages</span></code>:</dt><dd><p>A list of package names to be included in their entirety outside of the
<code class="docutils literal notranslate"><span class="pre">site-packages.zip</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prescripts</span></code>:</dt><dd><p>A list of additional Python scripts to run before initializing the main
script. This is often used to monkey-patch included modules so that they
work in a frozen environment. The prescripts may be module names,
file names, or file-like objects containing Python code (e.g. StringIO).
Note that if a file-like object is used, it will not currently be scanned
for additional dependencies.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Recipes</a><ul>
<li><a class="reference internal" href="#common-causes-for-incompatibility">Common causes for incompatibility</a></li>
<li><a class="reference internal" href="#built-in-recipes">Built-in recipes</a></li>
<li><a class="reference internal" href="#developing-recipes">Developing Recipes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="options.html"
                        title="previous chapter">py2app Setuptools Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="implementation.html"
                        title="next chapter">Implementation Details</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/recipes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="implementation.html" title="Implementation Details"
             >next</a> |</li>
        <li class="right" >
          <a href="options.html" title="py2app Setuptools Configuration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">py2app 2.0a0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Recipes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010, Ronald Oussoren, Bob Ippolito.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.1.
    </div>
  </body>
</html>