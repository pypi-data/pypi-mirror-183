"use strict";(self.webpackChunkvegafusion_jupyter=self.webpackChunkvegafusion_jupyter||[]).push([[568],{568:(e,s,n)=>{n.r(s),n.d(s,{MODULE_NAME:()=>i.o,MODULE_VERSION:()=>i.Y,VegaFusionModel:()=>t.VegaFusionModel,VegaFusionView:()=>t.VegaFusionView});var i=n(657),t=n(367)},657:(e,s,n)=>{n.d(s,{Y:()=>t,o:()=>l});const i=n(147),t=i.version,l=i.name},367:(e,s,n)=>{n.r(s),n.d(s,{VegaFusionModel:()=>l,VegaFusionView:()=>o});var i=n(565),t=n(657);class l extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:l.model_name,_model_module:l.model_module,_model_module_version:l.model_module_version,_view_name:l.view_name,_view_module:l.view_module,_view_module_version:l.view_module_version,spec:null,full_vega_spec:null,client_vega_spec:null,server_vega_spec:null,vegafusion_handle:null,verbose:null,debounce_wait:30,debounce_max_wait:60,download_source_link:null,_request_msg:null,_response_msg:null})}}l.serializers=Object.assign(Object.assign({},i.DOMWidgetModel.serializers),{_request_msg:{serialize:e=>e.buffer?new DataView(e.buffer.slice(0)):null}}),l.model_name="VegaFusionModel",l.model_module=t.o,l.model_module_version=t.Y,l.view_name="VegaFusionView",l.view_module=t.o,l.view_module_version=t.Y;class o extends i.DOMWidgetView{async render(){const{embedVegaFusion:e}=await n.e(288).then(n.t.bind(n,288,23));this.embedVegaFusion=e;const{compile:s}=await n.e(453).then(n.t.bind(n,453,23));this.vegalite_compile=s,this.value_changed(),this.model.on("change:spec",this.value_changed,this),this.model.on("change:verbose",this.value_changed,this),this.model.on("change:debounce_wait",this.value_changed,this),this.model.on("change:debounce_max_wait",this.value_changed,this),this.model.on("change:download_source_link",this.value_changed,this),this.model.on("change:_response_msg",(()=>{const e=this.model.get("_response_msg");if(null!==e){this.model.get("verbose")&&(console.log("VegaFusion(js): Received response"),console.log(e.buffer));const s=new Uint8Array(e.buffer);this.vegafusion_handle.receive(s)}}))}value_changed(){let e=this.model.get("spec");if(null!==e){let s,n=JSON.parse(e);if(n.$schema.endsWith("schema/vega/v5.json"))s=e;else{let e=this.vegalite_compile(n);s=JSON.stringify(e.spec,null,2)}let i={verbose:this.model.get("verbose")||!1,debounce_wait:this.model.get("debounce_wait")||30,debounce_max_wait:this.model.get("debounce_max_wait"),download_source_link:this.model.get("download_source_link")};this.vegafusion_handle=this.embedVegaFusion(this.el,s,(e=>{this.model.get("verbose")&&console.log("VegaFusion(js): Send request"),this.model.set("_request_msg",new DataView(e.buffer)),this.touch(),this.model.set("_request_msg",{})}),i),this.model.set("full_vega_spec",s),this.model.set("client_vega_spec",this.vegafusion_handle.client_spec_json()),this.model.set("server_vega_spec",this.vegafusion_handle.server_spec_json()),this.model.set("comm_plan",this.vegafusion_handle.comm_plan_json()),this.touch()}}}},147:e=>{e.exports=JSON.parse('{"name":"vegafusion-jupyter","version":"0.11.0-rc12","description":"Altair Jupyter Widget library that relies on VegaFusion for serverside calculations","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","dist/*.wasm","css/*.css","css/*.scss","images/*.svg"],"homepage":"https://github.com/vegafusion/vegafusion","bugs":{"url":"https://github.com/vegafusion/vegafusion/issues"},"license":"AGPL-3.0-or-later","author":{"name":"VegaFusion Technologies LLC","email":"jon@vegafusion.io"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/jonmmease/vegafusion"},"scripts":{"build:dev":"npm run build:lib && npm run build:nbextension && npm run build:labextension:dev && pip install --force-reinstall --no-deps .","build:prod":"npm run clean && npm run build:lib && npm run build:nbextension && npm run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc && sass scss:css","build:nbextension":"webpack","clean":"npm run clean:lib && npm run clean:dist && npm run clean:nbextension && npm run clean:labextension","clean:dist":"rimraf dist","clean:lib":"rimraf lib","clean:labextension":"rimraf vegafusion_jupyter/labextension","clean:nbextension":"rimraf vegafusion_jupyter/nbextension/* && cp src/nbextension/extension.js vegafusion_jupyter/nbextension/","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"npm run build:prod","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0","@jupyterlab/notebook":"^3.0.0 || ^4.0.0","marked":"^4.0.10","vega-lite":"^4.17.0","vegafusion-embed":"../../javascript/vegafusion-embed","vegafusion-wasm":"../../vegafusion-wasm/pkg"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.16.3","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"6.5.1","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","sass":"^1.45.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","svg-inline-loader":"^0.8.2","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.65.0","webpack-cli":"^4.9.1","webpack-require-from":"^1.8.6"},"jupyterlab":{"extension":"lib/plugin","outputDir":"vegafusion_jupyter/labextension/","webpackConfig":"webpack.config.experimental.js","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);