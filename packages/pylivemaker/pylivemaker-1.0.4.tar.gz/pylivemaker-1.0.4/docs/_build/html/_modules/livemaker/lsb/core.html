
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>livemaker.lsb.core &#8212; pylivemaker 1.0.0-dev documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for livemaker.lsb.core</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2020 Peter Rowlands &lt;peter@pmrowla.com&gt;</span>
<span class="c1"># Copyright (C) 2014 tinfoil &lt;https://bitbucket.org/tinfoil/&gt;</span>
<span class="c1">#</span>
<span class="c1"># This file is a part of pylivemaker.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify it under</span>
<span class="c1"># the terms of the GNU General Public License as published by the Free Software</span>
<span class="c1"># Foundation, either version 3 of the License, or (at your option) any later</span>
<span class="c1"># version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="c1"># ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<span class="c1"># FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License along with</span>
<span class="c1"># this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="sd">&quot;&quot;&quot;Core lmscript classes.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">enum</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">import</span> <span class="nn">construct</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">loguru</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>


<div class="viewcode-block" id="BaseSerializable"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable">[docs]</a><span class="k">class</span> <span class="nc">BaseSerializable</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for serializable LiveMaker objects.</span>

<span class="sd">    Note:</span>
<span class="sd">        LiveMaker uses 3 different script serialization formats:</span>

<span class="sd">            - LSC (old text .lsc)</span>
<span class="sd">            - XML (new XML .lsc)</span>
<span class="sd">            - LSB (compiled binary .lsb)</span>

<span class="sd">        In pylivemaker, we currently only support serializing to and from</span>
<span class="sd">        the binary LSB format. Subclasses of `BaseSerializable` do support</span>
<span class="sd">        serialization to pseudo-LSC and pseudo-XML formats so that a script</span>
<span class="sd">        can be examined for patching purposes, however, these exported formats</span>
<span class="sd">        cannot currently be re-read as input by pylivemaker.</span>

<span class="sd">        This means that pylivemaker cannot be used to compile .lsc files from</span>
<span class="sd">        a LiveMaker/LiveNovel template or project directory.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># __iter__ and/or __getitem__ need to be implemented in subclasses for</span>
    <span class="c1"># construct to be able to build an object.</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<div class="viewcode-block" id="BaseSerializable.get"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span></div>

<div class="viewcode-block" id="BaseSerializable.to_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.to_lsc">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">to_lsc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Serialize this object as pseudo-LSC data.&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="BaseSerializable.from_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.from_lsc">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_lsc</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse text .lsc data into an object.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="BaseSerializable.to_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.to_xml">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Serialize an object as pseudo-LSC XML.&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="BaseSerializable.from_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.from_xml">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_xml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse XML into an object.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a construct Struct for this class.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">Struct</span><span class="p">()</span>

<div class="viewcode-block" id="BaseSerializable.from_struct"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.BaseSerializable.from_struct">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">struct</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Instantiate an object from a construct Struct.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="n">construct</span><span class="o">.</span><span class="n">Container</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">struct</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
            <span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="ParamType"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.ParamType">[docs]</a><span class="k">class</span> <span class="nc">ParamType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;:class:`Param` data type.&quot;&quot;&quot;</span>

    <span class="n">Var</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="sd">&quot;&quot;&quot;Variable name.</span>

<span class="sd">    Internally, LiveMaker stores TParamVar as a Delphi Variant type which in theory supports</span>
<span class="sd">    any possible Delphi type, but LiveMaker only uses it as a variable length string.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Int</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="sd">&quot;&quot;&quot;Integer.&quot;&quot;&quot;</span>

    <span class="n">Float</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="sd">&quot;&quot;&quot;Floating point value.</span>

<span class="sd">    LiveMaker TParamFloats are IEEE 80-bit precision floats, in pylivemaker we handle them</span>
<span class="sd">    as numpy `longdouble`.</span>
<span class="sd">    According to numpy docs, ``np.longdouble` is either `float96` or ``float128`` depending on platform,</span>
<span class="sd">    and in both cases they are actually ``float80`` padded with zeroes to 96 or 128 bits.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Flag</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="sd">&quot;&quot;&quot;1-byte Enum/Flag type.&quot;&quot;&quot;</span>

    <span class="n">Str</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="sd">&quot;&quot;&quot;CP932 encoded string.</span>

<span class="sd">    Internally, pylivemaker handles all strings as Python unicode strings.</span>
<span class="sd">    &quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="OpeDataType"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeDataType">[docs]</a><span class="k">class</span> <span class="nc">OpeDataType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;:class:`OpeData` operator type.</span>

<span class="sd">    Operator type determines how an expression will be evaluated.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">None_</span> <span class="o">=</span> <span class="mh">0x00</span>

    <span class="n">To</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="sd">&quot;&quot;&quot;Operator ``=`` (assignment).&quot;&quot;&quot;</span>

    <span class="n">Plus</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="sd">&quot;&quot;&quot;Operator ``+``.</span>

<span class="sd">    Note:</span>
<span class="sd">        In LiveMaker, + can be used for both addition and string concatenation, depending</span>
<span class="sd">        on the data type of the result variable. If the result variable is a numeric type</span>
<span class="sd">        and one of the arguments is a string, the string will be coerced to number</span>
<span class="sd">        (i.e. for ``x = 1 + &quot;2&quot;`` and ``x`` is an ``Int``, the final value of ``x`` will be ``3``).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Minus</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="sd">&quot;&quot;&quot;Operator ``-``.&quot;&quot;&quot;</span>

    <span class="n">Mul</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="sd">&quot;&quot;&quot;Operator ``*``.&quot;&quot;&quot;</span>

    <span class="n">Div</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="sd">&quot;&quot;&quot;Operator ``/``.&quot;&quot;&quot;</span>

    <span class="n">Mod</span> <span class="o">=</span> <span class="mh">0x06</span>
    <span class="sd">&quot;&quot;&quot;Operator ``%``.&quot;&quot;&quot;</span>

    <span class="n">Or</span> <span class="o">=</span> <span class="mh">0x07</span>
    <span class="sd">&quot;&quot;&quot;Operator ``|``.</span>

<span class="sd">    Note:</span>
<span class="sd">        In LiveMaker, ``|`` is used for both bitwise OR and logical OR, depending</span>
<span class="sd">        on the data type of the operands.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">And</span> <span class="o">=</span> <span class="mh">0x08</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&amp;``.</span>

<span class="sd">    Note:</span>
<span class="sd">        In LiveMaker, ``&amp;`` is used for both bitwise AND and logical AND, depending</span>
<span class="sd">        on the data type of the operands.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Xor</span> <span class="o">=</span> <span class="mh">0x09</span>
    <span class="sd">&quot;&quot;&quot;Operator ``^`` (bitwise XOR).&quot;&quot;&quot;</span>

    <span class="n">DimTo</span> <span class="o">=</span> <span class="mh">0x0A</span>
    <span class="sd">&quot;&quot;&quot;Operator ``[]`` (array access).&quot;&quot;&quot;</span>

    <span class="n">Func</span> <span class="o">=</span> <span class="mh">0x0B</span>
    <span class="sd">&quot;&quot;&quot;Operator ``()`` (function call).</span>

<span class="sd">    Available functions are listed in :class:`OpeFuncType`.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Equal</span> <span class="o">=</span> <span class="mh">0x0C</span>
    <span class="sd">&quot;&quot;&quot;Operator ``==`` (equals).&quot;&quot;&quot;</span>

    <span class="n">Big</span> <span class="o">=</span> <span class="mh">0x0D</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&gt;`` (greater than).&quot;&quot;&quot;</span>

    <span class="n">Small</span> <span class="o">=</span> <span class="mh">0x0E</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&lt;`` (less than).&quot;&quot;&quot;</span>

    <span class="n">EBig</span> <span class="o">=</span> <span class="mh">0x0F</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&gt;=`` (greater than or equals).&quot;&quot;&quot;</span>

    <span class="n">ESmall</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&lt;=`` (less than or equals).&quot;&quot;&quot;</span>

    <span class="n">ShiftL</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&lt;&lt;`` (bitwise shift left).&quot;&quot;&quot;</span>

    <span class="n">ShiftR</span> <span class="o">=</span> <span class="mh">0x12</span>
    <span class="sd">&quot;&quot;&quot;Operator ``&gt;&gt;`` (bitwise shift right).&quot;&quot;&quot;</span>

    <span class="n">ComboStr</span> <span class="o">=</span> <span class="mh">0x13</span>
    <span class="sd">&quot;&quot;&quot;Operator ``++`` (string concatenation).&quot;&quot;&quot;</span>

    <span class="n">NEqual</span> <span class="o">=</span> <span class="mh">0x14</span>
    <span class="sd">&quot;&quot;&quot;Operator ``!=`` (not equals).&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="OpeFuncType"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeFuncType">[docs]</a><span class="k">class</span> <span class="nc">OpeFuncType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function type.</span>

<span class="sd">    See LiveNovel docs for details on each available function.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">IntToStr</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">IntToHex</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">GetProp</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">SetProp</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">GetArraySize</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">Length</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="n">JLength</span> <span class="o">=</span> <span class="mh">0x06</span>
    <span class="n">Copy</span> <span class="o">=</span> <span class="mh">0x07</span>
    <span class="n">JCopy</span> <span class="o">=</span> <span class="mh">0x08</span>
    <span class="n">Delete</span> <span class="o">=</span> <span class="mh">0x09</span>
    <span class="n">JDelete</span> <span class="o">=</span> <span class="mh">0x0A</span>
    <span class="n">Insert</span> <span class="o">=</span> <span class="mh">0x0B</span>
    <span class="n">JInsert</span> <span class="o">=</span> <span class="mh">0x0C</span>
    <span class="n">CompareStr</span> <span class="o">=</span> <span class="mh">0x0D</span>
    <span class="n">CompareText</span> <span class="o">=</span> <span class="mh">0x0E</span>
    <span class="n">Pos</span> <span class="o">=</span> <span class="mh">0x0F</span>
    <span class="n">JPos</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="n">Trim</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="n">JTrim</span> <span class="o">=</span> <span class="mh">0x12</span>
    <span class="n">Exists</span> <span class="o">=</span> <span class="mh">0x13</span>
    <span class="n">Not</span> <span class="o">=</span> <span class="mh">0x14</span>
    <span class="n">SetArray</span> <span class="o">=</span> <span class="mh">0x15</span>
    <span class="n">FillMem</span> <span class="o">=</span> <span class="mh">0x16</span>
    <span class="n">CopyMem</span> <span class="o">=</span> <span class="mh">0x17</span>
    <span class="n">GetCheck</span> <span class="o">=</span> <span class="mh">0x18</span>
    <span class="n">SetCheck</span> <span class="o">=</span> <span class="mh">0x19</span>
    <span class="n">Random</span> <span class="o">=</span> <span class="mh">0x1A</span>
    <span class="n">GetSaveCaption</span> <span class="o">=</span> <span class="mh">0x1B</span>
    <span class="n">ArrayToString</span> <span class="o">=</span> <span class="mh">0x1C</span>
    <span class="n">StringToArray</span> <span class="o">=</span> <span class="mh">0x1D</span>
    <span class="n">IndexOfStr</span> <span class="o">=</span> <span class="mh">0x1E</span>
    <span class="n">SortStr</span> <span class="o">=</span> <span class="mh">0x1F</span>
    <span class="n">ListCompo</span> <span class="o">=</span> <span class="mh">0x20</span>
    <span class="n">ToClientX</span> <span class="o">=</span> <span class="mh">0x21</span>
    <span class="n">ToClientY</span> <span class="o">=</span> <span class="mh">0x22</span>
    <span class="n">ToScreenX</span> <span class="o">=</span> <span class="mh">0x23</span>
    <span class="n">ToScreenY</span> <span class="o">=</span> <span class="mh">0x24</span>
    <span class="n">Int</span> <span class="o">=</span> <span class="mh">0x25</span>
    <span class="n">Float</span> <span class="o">=</span> <span class="mh">0x26</span>
    <span class="n">Sin</span> <span class="o">=</span> <span class="mh">0x27</span>
    <span class="n">Cos</span> <span class="o">=</span> <span class="mh">0x28</span>
    <span class="n">Tan</span> <span class="o">=</span> <span class="mh">0x29</span>
    <span class="n">ArcSin</span> <span class="o">=</span> <span class="mh">0x2A</span>
    <span class="n">ArcCos</span> <span class="o">=</span> <span class="mh">0x2B</span>
    <span class="n">ArcTan</span> <span class="o">=</span> <span class="mh">0x2C</span>
    <span class="n">ArcTan2</span> <span class="o">=</span> <span class="mh">0x2D</span>
    <span class="n">Hypot</span> <span class="o">=</span> <span class="mh">0x2E</span>
    <span class="n">IndexOfMenu</span> <span class="o">=</span> <span class="mh">0x2F</span>
    <span class="n">Abs</span> <span class="o">=</span> <span class="mh">0x30</span>
    <span class="n">Fabs</span> <span class="o">=</span> <span class="mh">0x31</span>
    <span class="n">VarExists</span> <span class="o">=</span> <span class="mh">0x32</span>
    <span class="n">EncodeDate</span> <span class="o">=</span> <span class="mh">0x33</span>
    <span class="n">EncodeTime</span> <span class="o">=</span> <span class="mh">0x34</span>
    <span class="n">DecodeDate</span> <span class="o">=</span> <span class="mh">0x35</span>
    <span class="n">DecodeTime</span> <span class="o">=</span> <span class="mh">0x36</span>
    <span class="n">GetYear</span> <span class="o">=</span> <span class="mh">0x37</span>
    <span class="n">GetMonth</span> <span class="o">=</span> <span class="mh">0x38</span>
    <span class="n">GetDay</span> <span class="o">=</span> <span class="mh">0x39</span>
    <span class="n">GetHour</span> <span class="o">=</span> <span class="mh">0x3A</span>
    <span class="n">GetMin</span> <span class="o">=</span> <span class="mh">0x3B</span>
    <span class="n">GetSec</span> <span class="o">=</span> <span class="mh">0x3C</span>
    <span class="n">GetWeek</span> <span class="o">=</span> <span class="mh">0x3D</span>
    <span class="n">GetWeekStr</span> <span class="o">=</span> <span class="mh">0x3E</span>
    <span class="n">GetWeekJStr</span> <span class="o">=</span> <span class="mh">0x3F</span>
    <span class="n">FixStr</span> <span class="o">=</span> <span class="mh">0x40</span>
    <span class="n">GetDisplayMode</span> <span class="o">=</span> <span class="mh">0x41</span>
    <span class="n">AddArray</span> <span class="o">=</span> <span class="mh">0x42</span>
    <span class="n">InsertArray</span> <span class="o">=</span> <span class="mh">0x43</span>
    <span class="n">DeleteArray</span> <span class="o">=</span> <span class="mh">0x44</span>
    <span class="n">InPrimary</span> <span class="o">=</span> <span class="mh">0x45</span>
    <span class="n">CopyArray</span> <span class="o">=</span> <span class="mh">0x46</span>
    <span class="n">FileExists</span> <span class="o">=</span> <span class="mh">0x47</span>
    <span class="n">LoadTextFile</span> <span class="o">=</span> <span class="mh">0x48</span>
    <span class="n">LowerCase</span> <span class="o">=</span> <span class="mh">0x49</span>
    <span class="n">UpperCase</span> <span class="o">=</span> <span class="mh">0x4A</span>
    <span class="n">ExtractFilePath</span> <span class="o">=</span> <span class="mh">0x4B</span>
    <span class="n">ExtractFileName</span> <span class="o">=</span> <span class="mh">0x4C</span>
    <span class="n">ExtractFileExt</span> <span class="o">=</span> <span class="mh">0x4D</span>
    <span class="n">IsPathDelimiter</span> <span class="o">=</span> <span class="mh">0x4E</span>
    <span class="n">AddBackSlash</span> <span class="o">=</span> <span class="mh">0x4F</span>
    <span class="n">ChangeFileExt</span> <span class="o">=</span> <span class="mh">0x50</span>
    <span class="n">IsDelimiter</span> <span class="o">=</span> <span class="mh">0x51</span>
    <span class="n">StringOfChar</span> <span class="o">=</span> <span class="mh">0x52</span>
    <span class="n">StringReplace</span> <span class="o">=</span> <span class="mh">0x53</span>
    <span class="n">AssignTemp</span> <span class="o">=</span> <span class="mh">0x54</span>
    <span class="n">HanToZen</span> <span class="o">=</span> <span class="mh">0x55</span>
    <span class="n">ZenToHan</span> <span class="o">=</span> <span class="mh">0x56</span>
    <span class="n">DBCreateTable</span> <span class="o">=</span> <span class="mh">0x57</span>
    <span class="n">DBSetActive</span> <span class="o">=</span> <span class="mh">0x58</span>
    <span class="n">DBAddField</span> <span class="o">=</span> <span class="mh">0x59</span>
    <span class="n">DBSetRecNo</span> <span class="o">=</span> <span class="mh">0x5A</span>
    <span class="n">DBInsert</span> <span class="o">=</span> <span class="mh">0x5B</span>
    <span class="n">DBDelete</span> <span class="o">=</span> <span class="mh">0x5C</span>
    <span class="n">DBGetInt</span> <span class="o">=</span> <span class="mh">0x5D</span>
    <span class="n">DBSetInt</span> <span class="o">=</span> <span class="mh">0x5E</span>
    <span class="n">DBGetFloat</span> <span class="o">=</span> <span class="mh">0x5F</span>
    <span class="n">DBSetFloat</span> <span class="o">=</span> <span class="mh">0x60</span>
    <span class="n">DBGetBool</span> <span class="o">=</span> <span class="mh">0x61</span>
    <span class="n">DBSetBool</span> <span class="o">=</span> <span class="mh">0x62</span>
    <span class="n">DBGetStr</span> <span class="o">=</span> <span class="mh">0x63</span>
    <span class="n">DBSetStr</span> <span class="o">=</span> <span class="mh">0x64</span>
    <span class="n">DBRecordCount</span> <span class="o">=</span> <span class="mh">0x65</span>
    <span class="n">DBFindFirst</span> <span class="o">=</span> <span class="mh">0x66</span>
    <span class="n">DBFindLast</span> <span class="o">=</span> <span class="mh">0x67</span>
    <span class="n">DBFindNext</span> <span class="o">=</span> <span class="mh">0x68</span>
    <span class="n">DBFindPrior</span> <span class="o">=</span> <span class="mh">0x69</span>
    <span class="n">DBLocate</span> <span class="o">=</span> <span class="mh">0x6A</span>
    <span class="n">DBLoadTsvFile</span> <span class="o">=</span> <span class="mh">0x6B</span>
    <span class="n">DBDirectGetInt</span> <span class="o">=</span> <span class="mh">0x6C</span>
    <span class="n">DBDirectSetInt</span> <span class="o">=</span> <span class="mh">0x6D</span>
    <span class="n">DBDirectGetFloat</span> <span class="o">=</span> <span class="mh">0x6E</span>
    <span class="n">DBDirectSetFloat</span> <span class="o">=</span> <span class="mh">0x6F</span>
    <span class="n">DBDirectGetBool</span> <span class="o">=</span> <span class="mh">0x70</span>
    <span class="n">DBDirectSetBool</span> <span class="o">=</span> <span class="mh">0x71</span>
    <span class="n">DBDirectGetStr</span> <span class="o">=</span> <span class="mh">0x72</span>
    <span class="n">DBDirectSetStr</span> <span class="o">=</span> <span class="mh">0x73</span>
    <span class="n">DBCopyTable</span> <span class="o">=</span> <span class="mh">0x74</span>
    <span class="n">DBDeleteTable</span> <span class="o">=</span> <span class="mh">0x75</span>
    <span class="n">DBInsertTable</span> <span class="o">=</span> <span class="mh">0x76</span>
    <span class="n">DBCopy</span> <span class="o">=</span> <span class="mh">0x77</span>
    <span class="n">DBClearTable</span> <span class="o">=</span> <span class="mh">0x78</span>
    <span class="n">DBSort</span> <span class="o">=</span> <span class="mh">0x79</span>
    <span class="n">DBGetActive</span> <span class="o">=</span> <span class="mh">0x7A</span>
    <span class="n">DBGetRecNo</span> <span class="o">=</span> <span class="mh">0x7B</span>
    <span class="n">DBClearRecord</span> <span class="o">=</span> <span class="mh">0x7C</span>
    <span class="n">SetWallPaper</span> <span class="o">=</span> <span class="mh">0x7D</span>
    <span class="n">Min</span> <span class="o">=</span> <span class="mh">0x7E</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="mh">0x7F</span>
    <span class="n">Fmin</span> <span class="o">=</span> <span class="mh">0x80</span>
    <span class="n">Fmax</span> <span class="o">=</span> <span class="mh">0x81</span>
    <span class="n">GetVarType</span> <span class="o">=</span> <span class="mh">0x82</span>
    <span class="n">GetEnabled</span> <span class="o">=</span> <span class="mh">0x83</span>
    <span class="n">SetEnabled</span> <span class="o">=</span> <span class="mh">0x84</span>
    <span class="n">AddDelimiter</span> <span class="o">=</span> <span class="mh">0x85</span>
    <span class="n">ListSaveCaption</span> <span class="o">=</span> <span class="mh">0x86</span>
    <span class="n">OpenUrl</span> <span class="o">=</span> <span class="mh">0x87</span>
    <span class="n">Calc</span> <span class="o">=</span> <span class="mh">0x88</span>
    <span class="n">SaveScreen</span> <span class="o">=</span> <span class="mh">0x89</span>
    <span class="n">StrToIntDef</span> <span class="o">=</span> <span class="mh">0x8A</span>
    <span class="n">StrToFloatDef</span> <span class="o">=</span> <span class="mh">0x8B</span>
    <span class="n">GetVisible</span> <span class="o">=</span> <span class="mh">0x8C</span>
    <span class="n">SetVisible</span> <span class="o">=</span> <span class="mh">0x8D</span>
    <span class="n">GetHistoryCount</span> <span class="o">=</span> <span class="mh">0x8E</span>
    <span class="n">GetHistoryMaxCount</span> <span class="o">=</span> <span class="mh">0x8F</span>
    <span class="n">SetHistoryMaxCount</span> <span class="o">=</span> <span class="mh">0x90</span>
    <span class="n">GetGroupIndex</span> <span class="o">=</span> <span class="mh">0x91</span>
    <span class="n">GetSelected</span> <span class="o">=</span> <span class="mh">0x92</span>
    <span class="n">SetSelected</span> <span class="o">=</span> <span class="mh">0x93</span>
    <span class="n">SelectOpenFile</span> <span class="o">=</span> <span class="mh">0x94</span>
    <span class="n">SelectSaveFile</span> <span class="o">=</span> <span class="mh">0x95</span>
    <span class="n">SelectDirectory</span> <span class="o">=</span> <span class="mh">0x96</span>
    <span class="n">ExtractFile</span> <span class="o">=</span> <span class="mh">0x97</span>
    <span class="n">Chr</span> <span class="o">=</span> <span class="mh">0x98</span>
    <span class="n">Ord</span> <span class="o">=</span> <span class="mh">0x99</span>
    <span class="n">InCabinet</span> <span class="o">=</span> <span class="mh">0x9A</span>
    <span class="n">PushVar</span> <span class="o">=</span> <span class="mh">0x9B</span>
    <span class="n">PopVar</span> <span class="o">=</span> <span class="mh">0x9C</span>
    <span class="n">DeleteStack</span> <span class="o">=</span> <span class="mh">0x9D</span>
    <span class="n">CopyFile</span> <span class="o">=</span> <span class="mh">0x9E</span>
    <span class="n">DBGetTableCount</span> <span class="o">=</span> <span class="mh">0x9F</span>
    <span class="n">DBGetTable</span> <span class="o">=</span> <span class="mh">0xA0</span>
    <span class="n">CreateObject</span> <span class="o">=</span> <span class="mh">0xA1</span>
    <span class="n">DeleteObject</span> <span class="o">=</span> <span class="mh">0xA2</span>
    <span class="n">GetItem</span> <span class="o">=</span> <span class="mh">0xA3</span>
    <span class="n">UniqueArray</span> <span class="o">=</span> <span class="mh">0xA4</span>
    <span class="n">TrimArray</span> <span class="o">=</span> <span class="mh">0xA5</span>
    <span class="n">GetImeOpened</span> <span class="o">=</span> <span class="mh">0xA6</span>
    <span class="n">SetImeOpened</span> <span class="o">=</span> <span class="mh">0xA7</span>
    <span class="n">Alert</span> <span class="o">=</span> <span class="mh">0xA8</span>
    <span class="n">GetCinemaProp</span> <span class="o">=</span> <span class="mh">0xA9</span>
    <span class="n">SetCinemaProp</span> <span class="o">=</span> <span class="mh">0xAA</span></div>


<div class="viewcode-block" id="Param"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.Param">[docs]</a><span class="k">class</span> <span class="nc">Param</span><span class="p">(</span><span class="n">BaseSerializable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Expression parameter (operand).</span>

<span class="sd">    Internally, LiveMaker subclasses each possible TParam type,</span>
<span class="sd">    but in pylivemaker we handle them all here.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The value for this parameter.</span>
<span class="sd">        type (:class:`ParamType`): The data type for this parameter.</span>
<span class="sd">            If type is not specified, it will be guessed based on value.</span>

<span class="sd">    Note:</span>
<span class="sd">        If `value` is a variable name, ``Var`` type must be explicity specified,</span>
<span class="sd">        otherwise it will incorrectly be guessed to be ``Str``.</span>

<span class="sd">        If `value` is an integer flag, ``Flag`` type must be explicitly specified,</span>
<span class="sd">        otherwise it will be incorrectly guessed to be ``Int``.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Int</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">longdouble</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Float</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">longdouble</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Flag</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Could not guess datatype for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ParamType</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">name</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">raise</span> <span class="ne">KeyError</span>

<div class="viewcode-block" id="Param.keys"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.Param.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="Param.items"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.Param.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Param.to_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.Param.to_lsc">[docs]</a>    <span class="k">def</span> <span class="nf">to_lsc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Param.to_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.Param.to_xml">[docs]</a>    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_lsc</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">and</span> <span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">xml</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Replacing invalid xml char &quot;</span><span class="se">\\</span><span class="s1">x01&quot; in varname </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
            <span class="n">xml</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xml</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">Struct</span><span class="p">(</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Byte</span><span class="p">,</span> <span class="n">ParamType</span><span class="p">),</span>
            <span class="s2">&quot;value&quot;</span>
            <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Switch</span><span class="p">(</span>
                <span class="n">construct</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Int&quot;</span><span class="p">:</span> <span class="n">construct</span><span class="o">.</span><span class="n">Int32sl</span><span class="p">,</span>
                    <span class="s2">&quot;Float&quot;</span><span class="p">:</span> <span class="n">construct</span><span class="o">.</span><span class="n">ExprAdapter</span><span class="p">(</span>
                        <span class="n">construct</span><span class="o">.</span><span class="n">Bytes</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                        <span class="k">lambda</span> <span class="n">obj</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">longdouble</span><span class="p">),</span>
                        <span class="k">lambda</span> <span class="n">obj</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">longdouble</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()[</span><span class="o">-</span><span class="mi">10</span><span class="p">:],</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;Flag&quot;</span><span class="p">:</span> <span class="n">construct</span><span class="o">.</span><span class="n">Byte</span><span class="p">,</span>
                    <span class="s2">&quot;Str&quot;</span><span class="p">:</span> <span class="n">construct</span><span class="o">.</span><span class="n">PascalString</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Int32ul</span><span class="p">,</span> <span class="s2">&quot;cp932&quot;</span><span class="p">),</span>
                <span class="p">},</span>
                <span class="c1"># else &#39;Var&#39; variable name type</span>
                <span class="n">construct</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">PascalString</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Int32ul</span><span class="p">,</span> <span class="s2">&quot;cp932&quot;</span><span class="p">),),</span>
            <span class="p">),</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="OpeData"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData">[docs]</a><span class="k">class</span> <span class="nc">OpeData</span><span class="p">(</span><span class="n">BaseSerializable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Expression operator class.</span>

<span class="sd">    Internal LiveMaker TOpeData class.</span>

<span class="sd">    Args:</span>
<span class="sd">        type (:class:`OpeDataType`): Operator type for this expression.</span>
<span class="sd">        name (str): The name of result variable for this expression.</span>
<span class="sd">        func (:class:`OpeFuncType`): Function for this expression (only applicable if</span>
<span class="sd">            `type` is `OpeDataType.Func`.</span>
<span class="sd">        operands (list(:class:`Param`)): The operands for this expression.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">OpeDataType</span><span class="o">.</span><span class="n">None_</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operands</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">OpeDataType</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Func</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">OpeFuncType</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operands</span><span class="p">,</span> <span class="n">construct</span><span class="o">.</span><span class="n">ListContainer</span><span class="p">):</span>
            <span class="n">operands</span> <span class="o">=</span> <span class="p">[</span><span class="n">Param</span><span class="o">.</span><span class="n">from_struct</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">operands</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operands</span> <span class="o">=</span> <span class="n">operands</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenize</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">Param</span><span class="p">):</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_lsc</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">raise</span> <span class="ne">KeyError</span>

<div class="viewcode-block" id="OpeData.keys"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;func&quot;</span><span class="p">,</span> <span class="s2">&quot;operands&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="OpeData.items"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of operands in this expression.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">)</span>

<div class="viewcode-block" id="OpeData.to_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData.to_lsc">[docs]</a>    <span class="k">def</span> <span class="nf">to_lsc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="OpeData.to_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData.to_xml">[docs]</a>    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenize</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">Param</span><span class="p">):</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">to_xml</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">Struct</span><span class="p">(</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Byte</span><span class="p">,</span> <span class="n">OpeDataType</span><span class="p">),</span>
            <span class="s2">&quot;name&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">PascalString</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Int32ul</span><span class="p">,</span> <span class="s2">&quot;cp932&quot;</span><span class="p">),</span>
            <span class="s2">&quot;count&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Int32ul</span><span class="p">,</span>
            <span class="s2">&quot;func&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Switch</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;Func&quot;</span><span class="p">:</span> <span class="n">construct</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Byte</span><span class="p">,</span> <span class="n">OpeFuncType</span><span class="p">)}),</span>
            <span class="s2">&quot;operands&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">Param</span><span class="o">.</span><span class="n">_struct</span><span class="p">()),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_to</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="c1"># TODO: LiveMaker allows for doing math operators on strings via type</span>
    <span class="c1"># conversion - the docs say &quot;50&quot; + 100 should result in either 150 or &quot;150&quot;</span>
    <span class="c1"># depending on the result var&#39;s datatype.</span>
    <span class="c1">#</span>
    <span class="c1"># For our purposes don&#39;t worry about dealing with type coercion unless</span>
    <span class="c1"># someone finds a script that actually requires supporting it</span>

    <span class="k">def</span> <span class="nf">_plus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; + &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Plus() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_minus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; - &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Minus() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_mul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; * &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Mul() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_div</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; / &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Div() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; % &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Mod() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">%</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_or</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># LiveMaker uses | to specify both bitwise and boolean OR</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; | &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Or() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Flag</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Flag</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">|</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_and</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># LiveMaker uses | to specify both bitwise and boolean AND</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &amp; &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;And() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Flag</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Flag</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_xor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; ^ &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Xor() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">^</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_dimto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Array access</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">):</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operands</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; == &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_big</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &gt; &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_small</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &lt; &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_ebig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &gt;= &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_esmall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &lt;= &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_shiftl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &lt;&lt; &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ShiftL() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_shiftr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; &gt;&gt; &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ShiftR() expected numeric type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_combostr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># String join</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; ++ &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ComboStr() expected string type&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">]))]</span>

    <span class="k">def</span> <span class="nf">_nequal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operands</span>
        <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span> <span class="ow">or</span> <span class="n">p2</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="s2">&quot; != &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Param</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>

<div class="viewcode-block" id="OpeData.tokenize"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.OpeData.tokenize">[docs]</a>    <span class="k">def</span> <span class="nf">tokenize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a tokenized version of this expression.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list(str, :class:`Param`): List of tokens.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If an operator does not support this combination of</span>
<span class="sd">                operands.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">To</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Plus</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plus</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Minus</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minus</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Mul</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mul</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Div</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_div</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Mod</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mod</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Or</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_or</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">And</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_and</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Xor</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xor</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">DimTo</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dimto</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Func</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Equal</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_equal</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Big</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_big</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">Small</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_small</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">EBig</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ebig</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">ESmall</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_esmall</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">ShiftL</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shiftl</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">ShiftR</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shiftr</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">ComboStr</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combostr</span><span class="p">,</span>
                <span class="n">OpeDataType</span><span class="o">.</span><span class="n">NEqual</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nequal</span><span class="p">,</span>
            <span class="p">}[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">]()</span>
            <span class="k">return</span> <span class="n">tokens</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Cannot compute value for </span><span class="si">{}</span><span class="s2"> types.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="LiveParser"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParser">[docs]</a><span class="k">class</span> <span class="nc">LiveParser</span><span class="p">(</span><span class="n">BaseSerializable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parses a list of OpeData expressions into one result expression.</span>

<span class="sd">    Args:</span>
<span class="sd">        entries (list(:class:`OpeData`)): List of child expressions</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">construct</span><span class="o">.</span><span class="n">ListContainer</span><span class="p">):</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="p">[</span><span class="n">OpeData</span><span class="o">.</span><span class="n">from_struct</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_simplify</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;entries&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span>
        <span class="k">raise</span> <span class="ne">KeyError</span>

<div class="viewcode-block" id="LiveParser.keys"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParser.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;entries&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="LiveParser.items"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParser.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span></div>

<div class="viewcode-block" id="LiveParser.to_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParser.to_lsc">[docs]</a>    <span class="k">def</span> <span class="nf">to_lsc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="LiveParser.to_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParser.to_xml">[docs]</a>    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_lsc</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">xml</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Replacing invalid xml char &quot;</span><span class="se">\\</span><span class="s1">x01&quot;&#39;</span><span class="p">)</span>
            <span class="n">xml</span> <span class="o">=</span> <span class="n">xml</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xml</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">Struct</span><span class="p">(</span><span class="s2">&quot;entries&quot;</span> <span class="o">/</span> <span class="n">construct</span><span class="o">.</span><span class="n">PrefixedArray</span><span class="p">(</span><span class="n">construct</span><span class="o">.</span><span class="n">Int32ul</span><span class="p">,</span> <span class="n">OpeData</span><span class="o">.</span><span class="n">_struct</span><span class="p">()),)</span>

    <span class="c1">#     @classmethod</span>
    <span class="c1">#     def from_struct(cls, struct):</span>
    <span class="c1">#         &quot;&quot;&quot;Return a LiveParser for the specified struct.&quot;&quot;&quot;</span>
    <span class="c1">#         return cls(entries=[OpeData.from_struct(x) for x in struct.entries])</span>

    <span class="k">def</span> <span class="nf">_simplify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a simplified expression for all expressions in this parser.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_resolve</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">:</span>
                <span class="n">operands</span> <span class="o">=</span> <span class="n">exprs</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">operands</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">Param</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Var</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;____&quot;</span><span class="p">):</span>
                                <span class="c1"># LiveParser parameter name</span>
                                <span class="n">operands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_resolve</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">operands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">value</span>
                        <span class="k">elif</span> <span class="n">op</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">ParamType</span><span class="o">.</span><span class="n">Str</span><span class="p">:</span>
                            <span class="n">operands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">r&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">operands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">value</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">operands</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span><span class="p">]</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">operands</span><span class="p">])</span>

        <span class="n">exprs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
            <span class="n">exprs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">tokenize</span><span class="p">()})</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">OpeDataType</span><span class="o">.</span><span class="n">To</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;____arg&quot;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">_resolve</span><span class="p">(</span><span class="s2">&quot;____arg&quot;</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">_resolve</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">exprs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Last entry in LiveParser was not a To statement: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>


<div class="viewcode-block" id="LiveParserArray"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParserArray">[docs]</a><span class="k">class</span> <span class="nc">LiveParserArray</span><span class="p">(</span><span class="n">BaseSerializable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal use convenience class for handling arrays of :obj:`LiveParser` objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        parsers (iterable): Iterable containing this array&#39;s parsers.</span>
<span class="sd">        name (str): Name for this field, used as XML tag name when serializing.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parsers</span><span class="o">=</span><span class="p">[],</span> <span class="n">prefixed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parsers</span><span class="p">,</span> <span class="n">construct</span><span class="o">.</span><span class="n">ListContainer</span><span class="p">):</span>
            <span class="n">parsers</span> <span class="o">=</span> <span class="p">[</span><span class="n">LiveParser</span><span class="o">.</span><span class="n">from_struct</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">parsers</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span> <span class="o">=</span> <span class="n">parsers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefixed</span> <span class="o">=</span> <span class="n">prefixed</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">])</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">)</span>

<div class="viewcode-block" id="LiveParserArray.to_lsc"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParserArray.to_lsc">[docs]</a>    <span class="k">def</span> <span class="nf">to_lsc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return this command in text .lsc format.&quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">parser</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parser</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">to_lsc</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def from_lsc(cls, *args, **kwargs):</span>
    <span class="c1">#     parsers = []</span>
    <span class="c1">#     for arg in args:</span>
    <span class="c1">#         if arg:</span>
    <span class="c1">#             parsers.append(LiveParser.from_lsc(arg))</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             parsers.append(&#39;&#39;)</span>
    <span class="c1">#     return cls(parsers)</span>

<div class="viewcode-block" id="LiveParserArray.to_xml"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParserArray.to_xml">[docs]</a>    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># NOTE: For whatever reason, LiveMaker uses a &#39;\x02&#39; separated list of</span>
        <span class="c1"># strings for variable width lists, and child &lt;Item&gt; tags for fixed</span>
        <span class="c1"># size lists.</span>
        <span class="c1">#</span>
        <span class="c1"># &#39;\x02&#39; is not a legal XMl character and lxml will not accept it, so</span>
        <span class="c1"># we just use \t.</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixed</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">parser</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s2">&quot;to_xml&quot;</span><span class="p">):</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">to_xml</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">parser</span><span class="p">))</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">parser</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Item&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s2">&quot;to_xml&quot;</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">to_xml</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def from_xml(cls, root, **kwargs):</span>
    <span class="c1">#     parsers = []</span>
    <span class="c1">#     prefixed = True</span>
    <span class="c1">#     if len(root):</span>
    <span class="c1">#         prefixed = False</span>
    <span class="c1">#         for child in root:</span>
    <span class="c1">#             if child.tag == &#39;Item&#39;:</span>
    <span class="c1">#                 parsers.append(LiveParser.from_xml(child))</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         for parser in root.text.split(&#39;\x02&#39;):</span>
    <span class="c1">#             if parser:</span>
    <span class="c1">#                 parsers.append(LiveParser.from_xml(child))</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 parsers.append(&#39;&#39;)</span>
    <span class="c1">#     return LiveParserArray(parsers, prefixed=prefixed)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">subcon</span><span class="p">,</span> <span class="n">prefixed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a construct Struct for this class.</span>

<span class="sd">        Args:</span>
<span class="sd">            subcon: Can be a subcon or fixed size, depending on value of `prefixed`.</span>
<span class="sd">            prefixed: True if this is a PrefixedArray.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">prefixed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">PrefixedArray</span><span class="p">(</span><span class="n">subcon</span><span class="p">,</span> <span class="n">LiveParser</span><span class="o">.</span><span class="n">_struct</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">construct</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">subcon</span><span class="p">,</span> <span class="n">LiveParser</span><span class="o">.</span><span class="n">_struct</span><span class="p">())</span>

<div class="viewcode-block" id="LiveParserArray.from_struct"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.LiveParserArray.from_struct">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_struct</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">struct</span><span class="p">,</span> <span class="n">prefixed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="n">prefixed</span><span class="o">=</span><span class="n">prefixed</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PropertyType"><a class="viewcode-back" href="../../../livemaker.lsb.html#livemaker.lsb.core.PropertyType">[docs]</a><span class="k">class</span> <span class="nc">PropertyType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;LiveMaker object property constants.&quot;&quot;&quot;</span>

    <span class="n">PR_NONE</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">PR_NAME</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">PR_PARENT</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">PR_SOURCE</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">PR_LEFT</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">PR_TOP</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="n">PR_WIDTH</span> <span class="o">=</span> <span class="mh">0x06</span>
    <span class="n">PR_HEIGHT</span> <span class="o">=</span> <span class="mh">0x07</span>
    <span class="n">PR_ZOOMX</span> <span class="o">=</span> <span class="mh">0x08</span>
    <span class="n">PR_COLOR</span> <span class="o">=</span> <span class="mh">0x09</span>
    <span class="n">PR_BORDERWIDTH</span> <span class="o">=</span> <span class="mh">0x0A</span>
    <span class="n">PR_BORDERCOLOR</span> <span class="o">=</span> <span class="mh">0x0B</span>
    <span class="n">PR_ALPHA</span> <span class="o">=</span> <span class="mh">0x0C</span>
    <span class="n">PR_PRIORITY</span> <span class="o">=</span> <span class="mh">0x0D</span>
    <span class="n">PR_OFFSETX</span> <span class="o">=</span> <span class="mh">0x0E</span>
    <span class="n">PR_OFFSETY</span> <span class="o">=</span> <span class="mh">0x0F</span>
    <span class="n">PR_FONTNAME</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="n">PR_FONTHEIGHT</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="n">PR_FONTSTYLE</span> <span class="o">=</span> <span class="mh">0x12</span>
    <span class="n">PR_LINESPACE</span> <span class="o">=</span> <span class="mh">0x13</span>
    <span class="n">PR_FONTCOLOR</span> <span class="o">=</span> <span class="mh">0x14</span>
    <span class="n">PR_FONTLINKCOLOR</span> <span class="o">=</span> <span class="mh">0x15</span>
    <span class="n">PR_FONTBORDERCOLOR</span> <span class="o">=</span> <span class="mh">0x16</span>
    <span class="n">PR_FONTHOVERCOLOR</span> <span class="o">=</span> <span class="mh">0x17</span>
    <span class="n">PR_FONTHOVERSTYLE</span> <span class="o">=</span> <span class="mh">0x18</span>
    <span class="n">PR_HOVERCOLOR</span> <span class="o">=</span> <span class="mh">0x19</span>
    <span class="n">PR_ANTIALIAS</span> <span class="o">=</span> <span class="mh">0x1A</span>
    <span class="n">PR_DELAY</span> <span class="o">=</span> <span class="mh">0x1B</span>
    <span class="n">PR_PAUSED</span> <span class="o">=</span> <span class="mh">0x1C</span>
    <span class="n">PR_VOLUME</span> <span class="o">=</span> <span class="mh">0x1D</span>
    <span class="n">PR_REPEAT</span> <span class="o">=</span> <span class="mh">0x1E</span>
    <span class="n">PR_BALANCE</span> <span class="o">=</span> <span class="mh">0x1F</span>
    <span class="n">PR_ANGLE</span> <span class="o">=</span> <span class="mh">0x20</span>
    <span class="n">PR_ONPLAYING</span> <span class="o">=</span> <span class="mh">0x21</span>
    <span class="n">PR_ONNOTIFY</span> <span class="o">=</span> <span class="mh">0x22</span>
    <span class="n">PR_ONMOUSEMOVE</span> <span class="o">=</span> <span class="mh">0x23</span>
    <span class="n">PR_ONMOUSEOUT</span> <span class="o">=</span> <span class="mh">0x24</span>
    <span class="n">PR_ONLBTNDOWN</span> <span class="o">=</span> <span class="mh">0x25</span>
    <span class="n">PR_ONLBTNUP</span> <span class="o">=</span> <span class="mh">0x26</span>
    <span class="n">PR_ONRBTNDOWN</span> <span class="o">=</span> <span class="mh">0x27</span>
    <span class="n">PR_ONRBTNUP</span> <span class="o">=</span> <span class="mh">0x28</span>
    <span class="n">PR_ONWHEELDOWN</span> <span class="o">=</span> <span class="mh">0x29</span>
    <span class="n">PR_ONWHEELUP</span> <span class="o">=</span> <span class="mh">0x2A</span>
    <span class="n">PR_BRIGHTNESS</span> <span class="o">=</span> <span class="mh">0x2B</span>
    <span class="n">PR_ONPLAYEND</span> <span class="o">=</span> <span class="mh">0x2C</span>
    <span class="n">PR_INDEX</span> <span class="o">=</span> <span class="mh">0x2D</span>
    <span class="n">PR_COUNT</span> <span class="o">=</span> <span class="mh">0x2E</span>
    <span class="n">PR_ONLINK</span> <span class="o">=</span> <span class="mh">0x2F</span>
    <span class="n">PR_VISIBLE</span> <span class="o">=</span> <span class="mh">0x30</span>
    <span class="n">PR_COLCOUNT</span> <span class="o">=</span> <span class="mh">0x31</span>
    <span class="n">PR_ROWCOUNT</span> <span class="o">=</span> <span class="mh">0x32</span>
    <span class="n">PR_TEXT</span> <span class="o">=</span> <span class="mh">0x33</span>
    <span class="n">PR_MARGINX</span> <span class="o">=</span> <span class="mh">0x34</span>
    <span class="n">PR_MARGINY</span> <span class="o">=</span> <span class="mh">0x35</span>
    <span class="n">PR_HALIGN</span> <span class="o">=</span> <span class="mh">0x36</span>
    <span class="n">PR_BORDERSOURCETL</span> <span class="o">=</span> <span class="mh">0x37</span>
    <span class="n">PR_BORDERSOURCETC</span> <span class="o">=</span> <span class="mh">0x38</span>
    <span class="n">PR_BORDERSOURCETR</span> <span class="o">=</span> <span class="mh">0x39</span>
    <span class="n">PR_BORDERSOURCECL</span> <span class="o">=</span> <span class="mh">0x3A</span>
    <span class="n">PR_BORDERSOURCECC</span> <span class="o">=</span> <span class="mh">0x3B</span>
    <span class="n">PR_BORDERSOURCECR</span> <span class="o">=</span> <span class="mh">0x3C</span>
    <span class="n">PR_BORDERSOURCEBL</span> <span class="o">=</span> <span class="mh">0x3D</span>
    <span class="n">PR_BORDERSOURCEBC</span> <span class="o">=</span> <span class="mh">0x3E</span>
    <span class="n">PR_BORDERSOURCEBR</span> <span class="o">=</span> <span class="mh">0x3F</span>
    <span class="n">PR_BORDERHALIGNT</span> <span class="o">=</span> <span class="mh">0x40</span>
    <span class="n">PR_BORDERHALIGNC</span> <span class="o">=</span> <span class="mh">0x41</span>
    <span class="n">PR_BORDERHALIGNB</span> <span class="o">=</span> <span class="mh">0x42</span>
    <span class="n">PR_BORDERVALIGNL</span> <span class="o">=</span> <span class="mh">0x43</span>
    <span class="n">PR_BORDERVALIGNC</span> <span class="o">=</span> <span class="mh">0x44</span>
    <span class="n">PR_BORDERVALIGNR</span> <span class="o">=</span> <span class="mh">0x45</span>
    <span class="n">PR_SCROLLSOURCE</span> <span class="o">=</span> <span class="mh">0x46</span>
    <span class="n">PR_CHECKSOURCE</span> <span class="o">=</span> <span class="mh">0x47</span>
    <span class="n">PR_AUTOSCRAP</span> <span class="o">=</span> <span class="mh">0x48</span>
    <span class="n">PR_ONSELECT</span> <span class="o">=</span> <span class="mh">0x49</span>
    <span class="n">PR_RCLICKSCRAP</span> <span class="o">=</span> <span class="mh">0x4A</span>
    <span class="n">PR_ONOPENING</span> <span class="o">=</span> <span class="mh">0x4B</span>
    <span class="n">PR_ONOPENED</span> <span class="o">=</span> <span class="mh">0x4C</span>
    <span class="n">PR_ONCLOSING</span> <span class="o">=</span> <span class="mh">0x4D</span>
    <span class="n">PR_ONCLOSED</span> <span class="o">=</span> <span class="mh">0x4E</span>
    <span class="n">PR_CARETX</span> <span class="o">=</span> <span class="mh">0x4F</span>
    <span class="n">PR_CARETY</span> <span class="o">=</span> <span class="mh">0x50</span>
    <span class="n">PR_IGNOREMOUSE</span> <span class="o">=</span> <span class="mh">0x51</span>
    <span class="n">PR_TEXTPAUSED</span> <span class="o">=</span> <span class="mh">0x52</span>
    <span class="n">PR_TEXTDELAY</span> <span class="o">=</span> <span class="mh">0x53</span>
    <span class="n">PR_HOVERSOURCE</span> <span class="o">=</span> <span class="mh">0x54</span>
    <span class="n">PR_PRESSEDSOURCE</span> <span class="o">=</span> <span class="mh">0x55</span>
    <span class="n">PR_GROUPINDEX</span> <span class="o">=</span> <span class="mh">0x56</span>
    <span class="n">PR_ALLOWALLUP</span> <span class="o">=</span> <span class="mh">0x57</span>
    <span class="n">PR_SELECTED</span> <span class="o">=</span> <span class="mh">0x58</span>
    <span class="n">PR_CAPTUREMASK</span> <span class="o">=</span> <span class="mh">0x59</span>
    <span class="n">PR_POWER</span> <span class="o">=</span> <span class="mh">0x5A</span>
    <span class="n">PR_ORIGWIDTH</span> <span class="o">=</span> <span class="mh">0x5B</span>
    <span class="n">PR_ORIGHEIGHT</span> <span class="o">=</span> <span class="mh">0x5C</span>
    <span class="n">PR_APPEARX</span> <span class="o">=</span> <span class="mh">0x5D</span>
    <span class="n">PR_APPEARY</span> <span class="o">=</span> <span class="mh">0x5E</span>
    <span class="n">PR_PARTMOTION</span> <span class="o">=</span> <span class="mh">0x5F</span>
    <span class="n">PR_PARAM</span> <span class="o">=</span> <span class="mh">0x60</span>
    <span class="n">PR_PARAM2</span> <span class="o">=</span> <span class="mh">0x61</span>
    <span class="n">PR_TOPINDEX</span> <span class="o">=</span> <span class="mh">0x62</span>
    <span class="n">PR_READONLY</span> <span class="o">=</span> <span class="mh">0x63</span>
    <span class="n">PR_CURSOR</span> <span class="o">=</span> <span class="mh">0x64</span>
    <span class="n">PR_POSZOOMED</span> <span class="o">=</span> <span class="mh">0x65</span>
    <span class="n">PR_ONPLAYSTART</span> <span class="o">=</span> <span class="mh">0x66</span>
    <span class="n">PR_PARAM3</span> <span class="o">=</span> <span class="mh">0x67</span>
    <span class="n">PR_ONMOUSEIN</span> <span class="o">=</span> <span class="mh">0x68</span>
    <span class="n">PR_ONMAPIN</span> <span class="o">=</span> <span class="mh">0x69</span>
    <span class="n">PR_ONMAPOUT</span> <span class="o">=</span> <span class="mh">0x6A</span>
    <span class="n">PR_MAPSOURCE</span> <span class="o">=</span> <span class="mh">0x6B</span>
    <span class="n">PR_AMP</span> <span class="o">=</span> <span class="mh">0x6C</span>
    <span class="n">PR_WAVELEN</span> <span class="o">=</span> <span class="mh">0x6D</span>
    <span class="n">PR_SCROLLX</span> <span class="o">=</span> <span class="mh">0x6E</span>
    <span class="n">PR_SCROLLY</span> <span class="o">=</span> <span class="mh">0x6F</span>
    <span class="n">PR_FLIPH</span> <span class="o">=</span> <span class="mh">0x70</span>
    <span class="n">PR_FLIPV</span> <span class="o">=</span> <span class="mh">0x71</span>
    <span class="n">PR_ONIDLE</span> <span class="o">=</span> <span class="mh">0x72</span>
    <span class="n">PR_DISTANCEX</span> <span class="o">=</span> <span class="mh">0x73</span>
    <span class="n">PR_DISTANCEY</span> <span class="o">=</span> <span class="mh">0x74</span>
    <span class="n">PR_CLIPLEFT</span> <span class="o">=</span> <span class="mh">0x75</span>
    <span class="n">PR_CLIPTOP</span> <span class="o">=</span> <span class="mh">0x76</span>
    <span class="n">PR_CLIPWIDTH</span> <span class="o">=</span> <span class="mh">0x77</span>
    <span class="n">PR_CLIPHEIGHT</span> <span class="o">=</span> <span class="mh">0x78</span>
    <span class="n">PR_DURATION</span> <span class="o">=</span> <span class="mh">0x79</span>
    <span class="n">PR_THUMBSOURCE</span> <span class="o">=</span> <span class="mh">0x7A</span>
    <span class="n">PR_BUTTONSOURCE</span> <span class="o">=</span> <span class="mh">0x7B</span>
    <span class="n">PR_MIN</span> <span class="o">=</span> <span class="mh">0x7C</span>
    <span class="n">PR_MAX</span> <span class="o">=</span> <span class="mh">0x7D</span>
    <span class="n">PR_VALUE</span> <span class="o">=</span> <span class="mh">0x7E</span>
    <span class="n">PR_ORIENTATION</span> <span class="o">=</span> <span class="mh">0x7F</span>
    <span class="n">PR_SMALLCHANGE</span> <span class="o">=</span> <span class="mh">0x80</span>
    <span class="n">PR_LARGECHANGE</span> <span class="o">=</span> <span class="mh">0x81</span>
    <span class="n">PR_MAPTEXT</span> <span class="o">=</span> <span class="mh">0x82</span>
    <span class="n">PR_GLYPHWIDTH</span> <span class="o">=</span> <span class="mh">0x83</span>
    <span class="n">PR_GLYPHHEIGHT</span> <span class="o">=</span> <span class="mh">0x84</span>
    <span class="n">PR_ZOOMY</span> <span class="o">=</span> <span class="mh">0x85</span>
    <span class="n">PR_CLICKEDSOURCE</span> <span class="o">=</span> <span class="mh">0x86</span>
    <span class="n">PR_ANIPAUSED</span> <span class="o">=</span> <span class="mh">0x87</span>
    <span class="n">PR_ONHOLD</span> <span class="o">=</span> <span class="mh">0x88</span>
    <span class="n">PR_ONRELEASE</span> <span class="o">=</span> <span class="mh">0x89</span>
    <span class="n">PR_REVERSE</span> <span class="o">=</span> <span class="mh">0x8A</span>
    <span class="n">PR_PLAYING</span> <span class="o">=</span> <span class="mh">0x8B</span>
    <span class="n">PR_REWINDONLOAD</span> <span class="o">=</span> <span class="mh">0x8C</span>
    <span class="n">PR_COMPOTYPE</span> <span class="o">=</span> <span class="mh">0x8D</span>
    <span class="n">PR_FONTSHADOWCOLOR</span> <span class="o">=</span> <span class="mh">0x8E</span>
    <span class="n">PR_FONTBORDER</span> <span class="o">=</span> <span class="mh">0x8F</span>
    <span class="n">PR_FONTSHADOW</span> <span class="o">=</span> <span class="mh">0x90</span>
    <span class="n">PR_ONKEYDOWN</span> <span class="o">=</span> <span class="mh">0x91</span>
    <span class="n">PR_ONKEYUP</span> <span class="o">=</span> <span class="mh">0x92</span>
    <span class="n">PR_ONKEYREPEAT</span> <span class="o">=</span> <span class="mh">0x93</span>
    <span class="n">PR_HANDLEKEY</span> <span class="o">=</span> <span class="mh">0x94</span>
    <span class="n">PR_ONFOCUSIN</span> <span class="o">=</span> <span class="mh">0x95</span>
    <span class="n">PR_ONFOCUSOUT</span> <span class="o">=</span> <span class="mh">0x96</span>
    <span class="n">PR_OVERLAY</span> <span class="o">=</span> <span class="mh">0x97</span>
    <span class="n">PR_TAG</span> <span class="o">=</span> <span class="mh">0x98</span>
    <span class="n">PR_CAPTURELINK</span> <span class="o">=</span> <span class="mh">0x99</span>
    <span class="n">PR_FONTHOVERBORDER</span> <span class="o">=</span> <span class="mh">0x9A</span>
    <span class="n">PR_FONTHOVERBORDERCOLOR</span> <span class="o">=</span> <span class="mh">0x9B</span>
    <span class="n">PR_FONTHOVERSHADOW</span> <span class="o">=</span> <span class="mh">0x9C</span>
    <span class="n">PR_FONTHOVERSHADOWCOLOR</span> <span class="o">=</span> <span class="mh">0x9D</span>
    <span class="n">PR_BARSIZE</span> <span class="o">=</span> <span class="mh">0x9E</span>
    <span class="n">PR_MUTEONLOAD</span> <span class="o">=</span> <span class="mh">0x9F</span>
    <span class="n">PR_PLUSX</span> <span class="o">=</span> <span class="mh">0xA0</span>
    <span class="n">PR_PLUSY</span> <span class="o">=</span> <span class="mh">0xA1</span>
    <span class="n">PR_CARETHEIGHT</span> <span class="o">=</span> <span class="mh">0xA2</span>
    <span class="n">PR_REPEATPOS</span> <span class="o">=</span> <span class="mh">0xA3</span>
    <span class="n">PR_BLURSPAN</span> <span class="o">=</span> <span class="mh">0xA4</span>
    <span class="n">PR_BLURDELAY</span> <span class="o">=</span> <span class="mh">0xA5</span>
    <span class="n">PR_FONTCHANGEABLED</span> <span class="o">=</span> <span class="mh">0xA6</span>
    <span class="n">PR_IMEMODE</span> <span class="o">=</span> <span class="mh">0xA7</span>
    <span class="n">PR_FLOATANGLE</span> <span class="o">=</span> <span class="mh">0xA8</span>
    <span class="n">PR_FLOATZOOMX</span> <span class="o">=</span> <span class="mh">0xA9</span>
    <span class="n">PR_FLOATZOOMY</span> <span class="o">=</span> <span class="mh">0xAA</span>
    <span class="n">PR_CAPMASKLEVEL</span> <span class="o">=</span> <span class="mh">0xAB</span>
    <span class="n">PR_PADDINGLEFT</span> <span class="o">=</span> <span class="mh">0xAC</span>
    <span class="n">PR_PADDING_RIGHT</span> <span class="o">=</span> <span class="mh">0xAD</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">pylivemaker</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../readme.html">pylivemaker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli.html">Command-line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livenovel.html">LiveNovel Docs (en)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pylivemaker.readthedocs.io/en/latest/_static/LiveNovel/index.html">Original LM3 LiveNovel Docs (jp)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Peter Rowlands.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>