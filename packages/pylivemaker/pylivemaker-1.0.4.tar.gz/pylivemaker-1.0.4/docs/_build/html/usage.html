
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Usage &#8212; pylivemaker 1.0.0-dev documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command-line Tools" href="cli.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="api-examples">
<h2>API Examples<a class="headerlink" href="#api-examples" title="Permalink to this headline">¶</a></h2>
<p>Look at the <cite>livemaker.cli</cite> and <cite>livemaker.patch</cite> modules for usage examples.</p>
</div>
<div class="section" id="patching-example">
<h2>Patching Example<a class="headerlink" href="#patching-example" title="Permalink to this headline">¶</a></h2>
<p>To try and patch something:</p>
<ol class="arabic">
<li><p class="first">Extract game files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir game_files
$ lmar x game.exe -o game_files
</pre></div>
</div>
</li>
<li><p class="first">Dump some lsb files.
I suggest starting with <code class="docutils literal notranslate"><span class="pre">ゲームメイン.lsb</span></code> (<code class="docutils literal notranslate"><span class="pre">gamemain.lsb</span></code>), and then looking for the first user script to be called (generally <code class="docutils literal notranslate"><span class="pre">00000001.lsb</span></code>) and continue from there.
If you are familiar with LiveNovel, <code class="docutils literal notranslate"><span class="pre">ゲームメイン.lsb</span></code> is the root game start chart node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd game_files
$ lmlsb dump ゲームメイン.lsb &gt; gamemain.txt
$ lmlsb dump 00000001.lsb &gt; 00000001.lsb.txt
</pre></div>
</div>
</li>
<li><p class="first">Once you’ve found an LSB with a script you want to edit, scenario text lines from an LSB can be extracted into a CSV file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lmlsb extractcsv --encoding=utf-8-sig 00000001.lsb 00000001.csv
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is also possible to extract, translate and insert multiple LSB files
using a single CSV file. For details refer to this discussion:
<a class="reference external" href="https://github.com/pmrowla/pylivemaker/issues/58#issuecomment-626787758">https://github.com/pmrowla/pylivemaker/issues/58#issuecomment-626787758</a></p>
</div>
<ol class="arabic simple" start="4">
<li>Edit the CSV using your preferred spreadsheet tool. To translate a text block,
simply add your translation in the “Translated text” column.</li>
</ol>
<a class="reference internal image-reference" href="https://user-images.githubusercontent.com/651988/80898950-d770ae00-8d44-11ea-8772-99e49f3b8482.png"><img alt="https://user-images.githubusercontent.com/651988/80898950-d770ae00-8d44-11ea-8772-99e49f3b8482.png" src="https://user-images.githubusercontent.com/651988/80898950-d770ae00-8d44-11ea-8772-99e49f3b8482.png" style="width: 500px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For text blocks spanning multiple lines, newlines in the translated
text cell will be preserved in-game as line breaks.</p>
</div>
<ol class="arabic" start="5">
<li><p class="first">Patch the translated CSV back into the lsb.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lmlsb insertcsv --encoding=utf-8-sig 00000001.lsb 00000001.csv
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recommended way to translate scripts in pylivemaker 1.0
is via the CSV tools. <code class="docutils literal notranslate"><span class="pre">extractmenu</span></code> and <code class="docutils literal notranslate"><span class="pre">insertmenu</span></code> can be used
to translate in-game text menus via CSV files as well. For more details
on the CSV tools, refer to this (and related) github discussions:
<a class="reference external" href="https://github.com/pmrowla/pylivemaker/pull/37">https://github.com/pmrowla/pylivemaker/pull/37</a></p>
</div>
<ol class="arabic" start="6">
<li><p class="first">Patch the exe (for now the .lsb file must be in the same directory as the exe, since there is no command line option to set the correct archive entry path).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lmpatch some.exe 00000001.lsb
</pre></div>
</div>
</li>
</ol>
<div class="section" id="patching-with-lns-scripts">
<h3>Patching with LNS scripts<a class="headerlink" href="#patching-with-lns-scripts" title="Permalink to this headline">¶</a></h3>
<p>LNS scripts can be extracted and edited as well, in the event that you
need support for more advanced script tags which are not supported by
the CSV translation API.</p>
<p>Example (replaces steps 3 through 5 from above):</p>
<ol class="arabic" start="3">
<li><p class="first">Once you’ve found an lsb with a script you want to edit, extract it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir orig_scripts
$ lmlsb extract 00000001.lsb -o orig_scripts
</pre></div>
</div>
</li>
<li><p class="first">Edit the script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir translated_scripts
$ cp orig_scripts/*.lns translated_scripts
&lt;run your favorite text editor on whatever script you want to translate&gt;
</pre></div>
</div>
</li>
<li><p class="first">Patch the new script back into the lsb.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lmlsb insert 00000001.lsb scripts_dir/&lt;translated_script&gt;.lns 1234
</pre></div>
</div>
<p>(where 1234 is the appropriate TextIns command line number).</p>
</li>
</ol>
</div>
</div>
<div class="section" id="notes-for-translation-patches">
<h2>Notes for Translation Patches<a class="headerlink" href="#notes-for-translation-patches" title="Permalink to this headline">¶</a></h2>
<p>By default, LiveMaker games will display text using full-width latin characters, which causes text translated into any Western language to look very bad in-game.
For LiveMaker 3 based games, this behavior can be modified, but for LiveMaker 2 games, I am unaware of any solution for this issue.</p>
<p>To force LiveMaker 3 games to display text using half-width latin characters, the <code class="docutils literal notranslate"><span class="pre">PR_FONTCHANGEABLED</span></code> parameter must be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> for the given message box type.
This can be handled by using the <code class="docutils literal notranslate"><span class="pre">lmlsb</span> <span class="pre">edit</span></code> pylivemaker command.</p>
<p>The default settings for each LiveMaker message box type are set via <code class="docutils literal notranslate"><span class="pre">MesNew</span></code> commands, in the system <code class="docutils literal notranslate"><span class="pre">メッセージボックス作成.lsb</span></code> (create_message_box.lsb) file.
For the standard in-game text, users will want to modify the command corresponding to the <code class="docutils literal notranslate"><span class="pre">メッセージボックス</span></code> (message_box) box type (box type is the first parameter to <code class="docutils literal notranslate"><span class="pre">MesNew</span></code>).
In most cases, this should be command number 36 in <code class="docutils literal notranslate"><span class="pre">メッセージボックス作成.lsb</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lmlsb edit メッセージボックス作成.lsb 36
36: MesNew &quot;メッセージボックス&quot; &quot;メッセージボックス土台&quot; 10 10 GetProp(&quot;メッセージボックス土台&quot;, 5) - 10 - 10 GetProp(&quot;メッセージボックス土台&quot;, 6) - 10 - 10
1100   &quot;ＭＳ ゴシック&quot; 16 6 16777215 16711680 0 16776960 1  0 &quot;ノベルシステム\メッセージボックス\再生中.lsc&quot; &quot;ノベルシステム\メッセージボックス\イベント.lsc&quot;
    &quot;ノベルシステム\メッセージボックス\右クリック時.lsc&quot;    &quot;ノベルシステム\メッセージボックス\終了.lsc&quot; &quot;ノベルシステム\メッセージボックス\リンク.lsc&quot; 1 4 0
  &quot;ノベルシステム\メッセージボックス\再生開始.lsc&quot;  &quot;ノベルシステム\メッセージボックス\アイドル時.lsc&quot;     0 0 0    0    1 0

Enter new value for each field (or keep existing value)
Name [&quot;メッセージボックス&quot;]: &lt;skipping uneditable field&gt;
PR_PARENT [&quot;メッセージボックス土台&quot;]: &lt;skipping uneditable field&gt;
PR_LEFT [10]:
PR_TOP [10]:
PR_WIDTH [GetProp(&quot;メッセージボックス土台&quot;, 5) - 10 - 10]: &lt;skipping uneditable field&gt;
PR_HEIGHT [GetProp(&quot;メッセージボックス土台&quot;, 6) - 10 - 10]: &lt;skipping uneditable field&gt;
PR_ALPHA []: &lt;skipping uneditable field&gt;
PR_PRIORITY [1100]:
...
PR_TAG []: &lt;skipping uneditable field&gt;
PR_CAPTURELINK [1]:
PR_FONTCHANGEABLED [1]: 0
PR_PADDINGLEFT []: &lt;skipping uneditable field&gt;
PR_PADDING_RIGHT []: &lt;skipping uneditable field&gt;
Backing up original LSB.
Wrote new LSB.
</pre></div>
</div>
<p>In the above example, <code class="docutils literal notranslate"><span class="pre">lmlsb</span> <span class="pre">edit</span></code> is used to modify command #36 within <code class="docutils literal notranslate"><span class="pre">メッセージボックス作成.lsb</span></code>.
The existing values (shown in <code class="docutils literal notranslate"><span class="pre">[]</span></code> brackets) are kept for every field except for <code class="docutils literal notranslate"><span class="pre">PR_FONTCHANGEABLED</span></code>.
By changing that value to <code class="docutils literal notranslate"><span class="pre">0</span></code>, the standard in-game text box should now be displayed using half-width latin characters.</p>
<p>For more details refer to the thread in <a class="reference external" href="https://github.com/pmrowla/pylivemaker/issues/9#issuecomment-506694249">issue #9</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are multiple possible LiveMaker message box types (including menus/history/etc), so users generating a full translation patch may need to modify multiple <code class="docutils literal notranslate"><span class="pre">MesBox</span></code> commands to have their translated text displayed properly everywhere in-game.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pylivemaker</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">pylivemaker</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-examples">API Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#patching-example">Patching Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes-for-translation-patches">Notes for Translation Patches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="livenovel.html">LiveNovel Docs (en)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pylivemaker.readthedocs.io/en/latest/_static/LiveNovel/index.html">Original LM3 LiveNovel Docs (jp)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="cli.html" title="next chapter">Command-line Tools</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Peter Rowlands.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>