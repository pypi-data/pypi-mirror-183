0010        NAM  TANK  
0020        DEF  RUNTIM
0030        DEF  TOKS  
0040        DEF  PARSES
0050        DEF  ERMSG 
0060        DEF  INIT  
0070 RUNTIM BSZ  2
0080        DEF  TANK. 
0090        DEF  .   
0100 PARSES BSZ  0
0110 ERMSG  BYT  377,377
0120 TOKS   ASP  "TANK"
0130        ASP  ""
0140        BYT  377
0150 INIT   RTN  
0160        BYT  0,56
0170 .    LDM  R44,=11D,0
0180        DEF  DATE  
0190        ADMD R46,=BINTAB
0200        PUMD R44,+R12
0210        RTN  
0220 DATE   ASC  "MAY 26,1981"
0230        BYT  20,55
0240 TANK.  BIN  
0250        JSB  =CRTWPO
0260        JSB  =CRTINT
0270        JSB  =CRTUNW
0280        LDMD R22,=BINTAB
0290        STBD R17,X22,SAVR17
0300        LDM  R76,=300,3
0310        JSB  =BYTCRT
0320        LDM  R36,=5,0
0330        LDM  R26,=STARAS
0340        ADM  R26,R22
0350        JSB  =HLFLIN
0360        LDM  R76,=356,3
0370        JSB  =BYTCRT
0380        LDM  R36,=10,0
0390        LDM  R26,=NUSKAS
0400        ADM  R26,R22
0410        JSB  =HLFLIN
0420        LDM  R76,=200,1
0430        JSB  =BYTCRT
0440        LDB  R32,=52
0450        JSB  =OUTCHR
0460        LDM  R76,=276,1
0470        JSB  =BYTCRT
0480        JSB  =OUTCHR
0490        JSB  =OUTCHR
0500        LDB  R32,=76
0510        JSB  =OUTCHR
0520        LDM  R76,=374,1
0530        JSB  =BYTCRT
0540        LDB  R32,=74
0550        JSB  =OUTCHR
0560        LDB  R32,=52
0570        JSB  =OUTCHR
0580        JSB  =OUTCHR
0590        LDM  R76,=76,2
0600        JSB  =BYTCRT
0610        JSB  =OUTCHR
0620        CLM  R76
0630        STMD R76,X22,TANK  
0640        JSB  X22,DSPTNK
0650        LDM  R76,=102,0
0660        JSB  =BYTCRT
0670        DCM  R76
0680        DCM  R76
0690        STMD R76,X22,DUKADR
0700        LDM  R76,=2,0
0710        STMD R76,X22,DUKDIR
0720        LDB  R32,=52
0730        LDB  R36,=16
0740 DUCKS  JSB  =OUTCHR
0750        DCB  R36
0760        JNZ  DUCKS 
0770        LDM  R76,=142,3
0780        JSB  =BYTCRT
0790        DCB  R76
0800        DCB  R76
0810        STMD R76,X22,FRGADR
0820        LDM  R76,=376,377
0830        STMD R76,X22,FRGDIR
0840        LDB  R36,=16
0850 FROGS  JSB  =OUTCHR
0860        DCB  R36
0870        JNZ  FROGS 
0880        LDM  R76,=12,0
0890        JSB  =BYTCRT
0900        LDM  R26,=SKILAS
0910        ADM  R26,R22
0920        LDM  R36,=5,0
0930        JSB  =HLFLIN
0940        LDM  R76,=26,0
0950        JSB  =BYTCRT
0960        JSB  =ONEB  
0970        JNZ  R     
0980        ICB  R#
0990 R      CMB  R#,=13
1000        JNC  S     
1010        LDB  R#,=12
1020 S      STBD R#,X22,SKILL 
1030        CMB  R#,=12
1040        JNC  SKILOK
1050        LDB  R32,=61
1060        JSB  =OUTCHR
1070        CLB  R76
1080 SKILOK ADB  R#,=60
1090        STB  R#,R32
1100        JSB  =OUTCHR
1110        LDM  R76,=52,0
1120        JSB  =BYTCRT
1130        LDM  R26,=SCORAS
1140        ADM  R26,R22
1150        LDM  R36,=5,0
1160        JSB  =HLFLIN
1170        CLM  R76
1180        STMD R76,X22,SCORE 
1190        JSB  X22,UPSCOR
1200        LDM  R30,=NUSKIL
1210        STMD R30,X22,KEY#4 
1220        LDM  R30,=START 
1230        STMD R30,X22,KEY#1 
1240        LDM  R30,=RTN   
1250        STMD R30,X22,KEY#2 
1260        STMD R30,X22,KEY#3 
1270        STMD R30,X22,KEY#5 
1280        STMD R30,X22,KEY#6 
1290        STMD R30,X22,KEY#7 
1300        STMD R30,X22,KEY#8 
1310        CLM  R40
1320        STBD R40,X22,RUNFLG
1330        STMD R40,X22,SHELL1
1340        STMD R40,X22,BOMB-A
1350        STMD R44,X22,TARTIM
1360 NOKEY  LDBD R33,X22,RUNFLG
1370        JZR  NOMOVE
1380        JSB  X22,MOVTAR
1390        LDBD R32,X22,UPFLAG
1400        JZR  NOUP  
1410        JSB  X22,UPSCOR
1420 NOUP   LDBD R34,X22,DUKCNT
1430        LDBD R35,X22,FRGCNT
1440        ADB  R34,R35
1450        JZR  WIN!! 
1460        JSB  X22,MOVSHL
1470        JSB  X22,MOVBMB
1480 NOMOVE LDBD R33,=SVCWRD
1490        JEV  NOKEY 
1500        LDBD R33,=KEYHIT
1510        CMB  R33,=200
1520        JCY  MABEOK
1530 BADKEY CLM  R40
1540        LDB  R47,=30C
1550        PUMD R40,+R12
1560        JSB  X22,CLEAR%
1570 UNKEY  JSB  =EOJ2  
1610        RTN  
1620 MABEOK CMB  R#,=210
1630        JCY  BADKEY
1640        LLB  R#
1650        CLM  R30
1660        LDB  R30,R33
1670        ADM  R30,R22
1680        LDMD R30,X30,KEYS  
1690        ADM  R30,R22
1691        PUMD R30,+R6
1692        JSB  =EOJ2  
1693        POMD R30,-R6
1700        JSB  X30,ZERO  
1720        JMP  NOKEY 
1730 WIN!!  CLM  R40
1740        LDB  R47,=10C
1750        PUMD R40,+R12
1760        JSB  X22,CLEAR%
1770        RTN  
1780 NUSKIL CLM  R40
1790        LDB  R47,=20C
1800        PUMD R40,+R12
1810        POMD R36,-R6
1820        JSB  X22,CLEAR%
1830        RTN  
1840 START  LDM  R30,=FIRE  
1850        STMD R30,X22,KEY#4 
1860        STMD R30,X22,KEY#3 
1870        LDM  R30,=CLOCK.
1880        STMD R30,X22,KEY#2 
1890        LDM  R30,=CNTRCL
1900        STMD R30,X22,KEY#1 
1910        LDM  R76,=200,3
1920        JSB  =BYTCRT
1930        LDM  R26,=ROTAS 
1940        ADM  R26,R22
1950        LDM  R36,=16D,0
1960        JSB  =HLFLIN
1970        LDM  R76,=300,3
1980        JSB  =BYTCRT
1990        LDM  R26,=CLOCAS
2000        ADM  R26,R22
2010        LDM  R36,=17D,0
2020        JSB  =HLFLIN
2030        LDM  R26,=FIREAS
2040        ADM  R26,R22
2050        LDM  R36,=14,0
2060        LDM  R76,=346,3
2070        JSB  =BYTCRT
2080        JSB  =HLFLIN
2090        CLB  R76
2100        ICB  R76
2110        STBD R76,X22,RUNFLG
2120        RTN  
2130 DSPTNK LDM  R76,=236,1
2140 DSPTN- JSB  =BYTCRT
2150        LDMD R26,X22,TANK  
2160        ADM  R26,=TNKCHR
2170        ADM  R26,R22
2180        LDM  R36,=3,0
2190        JSB  =HLFLIN
2200        ADM  R76,=100,0
2210        JSB  =BYTCRT
2220        LDM  R36,=3,0
2230        JSB  =HLFLIN
2240        ADM  R76,=100,0
2250        JSB  =BYTCRT
2260        LDM  R36,=3,0
2270        JSB  =HLFLIN
2280 RTN    RTN  
2290 CLOCK. LDMD R30,X22,TANK  
2300        ADM  R30,=11,0
2310        CMM  R30,=44,0
2320        JNC  CLOK  
2330        CLM  R30
2340 CLOK   STMD R#,X#,TANK  
2350        JSB  X22,DSPTNK
2360        RTN  
2370 CNTRCL LDMD R30,X22,TANK  
2380        SBM  R30,=11,0
2390        JCY  CNTROK
2400        LDM  R30,=33,0
2410 CNTROK JMP  CLOK  
2420 ! ***********************
2430 FIRE   LDM  R26,=SHELL1
2440        JSB  X22,SHAVA?
2450 FIRERT RTN  
2460 HIT    DRP  R46
2470        JSB  =BYTCRT
2480        LDB  R32,=15
2490        JSB  =OUTCHR
2500        LDMD R36,X22,BOMB-A
2510        CMM  R36,R46
2520        JNZ  HIT-B 
2530        CLM  R36
2540        STMD R36,X22,BOMB-A
2550 HITBEP JSB  X22,BEEPER
2560        JMP  HITRTN
2570 HIT-B  LDMD R36,X22,BOMB-B
2580        CMM  R36,R46
2590        JNZ  HITTAR
2600        CLM  R36
2610        STMD R36,X22,BOMB-B
2620        JMP  HITBEP
2630 HITTAR LDMD R36,X22,SCORE 
2640        ADM  R36,=5,0
2650        STMD R36,X22,SCORE 
2660        JSB  X22,UPSCOR
2670 HITRTN CLE  
2680        ICE  
2690        RTN  
2700 SHAVA? CLE  
2710        ADM  R26,R22
2720        LDMD R46,R26
2730        JNZ  SHRTN 
2740        LDM  R46,=140,1
2750        LDM  R36,=300,377
2760        LDBD R44,X22,TANK  
2770        JZR  SHICE 
2780        LDM  R46,=344,1
2790        LDM  R36,=2,0
2800        SBB  R44,=11
2810        JZR  SHICE 
2820        LDM  R46,=140,2
2830        LDM  R36,=100,0
2840        SBB  R44,=11
2850        JZR  SHICE 
2860        LDM  R46,=334,1
2870        LDM  R36,=376,377
2880 SHICE  STMD R46,R26
2890        JSB  =BYTCRT
2900        STMD R36,X26,TEN   
2910        JSB  =INCHR 
2920        CMB  R32,=52
2930        JZR  HITBMB
2940        DRP  R46
2950        JSB  =BYTCRT
2960        LDB  R32,=53
2970        JSB  =OUTCHR
2980        CLE  
2990        ICE  
3000 SHRTN  RTN  
3010 HITBMB CLM  R34
3020        STMD R34,R26
3030        JSB  X22,HIT   
3040        RTN  
3050 ! ***********************
3060 UPSCOR LDM  R76,=64,0
3070        JSB  =BYTCRT
3080        LDB  R32,=15
3090        LDB  R33,=4
3100 UPOUT  JSB  =OUTCHR
3110        DCB  R33
3120        JNZ  UPOUT 
3130        LDMD R36,X22,SCORE 
3140        JSB  =CONBIN
3150        LDM  R30,=INPBUF
3160        JSB  =CVNUM 
3170        LDMD R22,=BINTAB
3180        LDM  R26,R30
3190        LDM  R76,=66,0
3200        JSB  =BYTCRT
3210        LDM  R20,=INPBUF
3220 MORE   POBD R32,+R20
3230        JSB  =OUTCHR
3240        CMM  R20,R26
3250        JNZ  MORE  
3260 BEEPER LDM  R32,=10C,0
3270        LDM  R30,=40,0
3280        PUMD R55,+R6
3290        LDM  R55,=10C,0,0
3300        ARP  R32
3310        CLB  R34
3320        JSB  =HORN  
3330 HORN   DAD  6756
3340        POMD R55,-R6
3350        RTN  
3360 ! ***********************
3370 SCORAS ASC  "SCORE"
3380 SKILAS ASC  "SKILL"
3390 NUSKAS ASC  "NU SKILL"
3400 STARAS ASC  "START"
3410 ROTAS  ASC  "ROTATE    ROTATE"
3420 CLOCAS ASC  "CNTRCLKWS CLOCKWS"
3430 FIREAS ASC  "FIRE    FIRE"
3440 TNKCHR ASC  " |   "
3450        ASC  "   - "
3460        ASC  "   | "
3470        ASC  " -   "
3480 ! ***********************
3490 BOMB-A BSZ  2
3500 BOMB-B BSZ  2
3510 BTIM-A BSZ  2
3520 BTIM-B BSZ  2
3530 TARTIM BSZ  2
3540 RND    BSZ  2
3550 DUKADR BSZ  2
3560 FRGADR BSZ  2
3570 DUKDIR BSZ  2
3580 FRGDIR BSZ  2
3590 TANK   BSZ  2
3600 DUKCNT BSZ  1
3610 FRGCNT BSZ  1
3620 SCORE  BSZ  2
3630 SKILL  BSZ  1
3640 RUNFLG BSZ  1
3650 SAVR17 BSZ  1
3660 SHELL1 BSZ  2
3670 SHELL2 BSZ  2
3680 SHELL3 BSZ  2
3690 SHELL4 BSZ  2
3700 SHEL1 BSZ  2
3710 ! SHEL2 BSZ 
3720 ! SHEL3 BSZ 
3730 ! SHEL4 BSZ 
3740 KEYS   BSZ  0
3750 KEY#1  BSZ  2
3760 KEY#2  BSZ  2
3770 KEY#3  BSZ  2
3780 KEY#4  BSZ  2
3790 KEY#5  BSZ  2
3800 KEY#6  BSZ  2
3810 KEY#7  BSZ  2
3820 KEY#8  BSZ  2
3825 EOJ2   DAD  34772
3830        LNK  TANK3S.asm
