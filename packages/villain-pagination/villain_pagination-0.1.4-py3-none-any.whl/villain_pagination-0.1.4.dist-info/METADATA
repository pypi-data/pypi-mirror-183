Metadata-Version: 2.1
Name: villain-pagination
Version: 0.1.4
Summary: A small pagination package
Home-page: https://github.com/villain-pagination/villain-pagination
Author: villain
Author-email: mon2210@naver.com
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: fastapi (>=0.88.0)
Requires-Dist: pydantic (>=1.8.2)
Requires-Dist: starlette (>=0.14.2)

# Welcome to villain-pagination

## Installation

First of all, you need to install villain-pagination on your local to start.

```
pip install villain-pagination
```

## Minimal Example

`Villain Paginator` uses SQLAlchemy ORM.

Let's start with a simple example below.
You need to import `page` and `paginator` function from `villain-pagination`.

- `page` : is a class which used as `response_model` in your route declaration.
- `paginator` : is main functions that will paginate your data.

To use paginate, 5 params required.

- `db` : is a SQLAlchemy session.
- `model` : is a object which you want to paginate.
- `order_by` : is a column of the model.
- `page` : is a number of a page requested to show.
- `size` : is a number of data which will shown in one page.

And Here is an example.

```python
from typing import Iterator, Any
from faker import Faker
from fastapi import Depends, FastAPI
from sqlalchemy import Column, Integer, String, create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import Session, sessionmaker

from villain import page, paginator

engine = create_engine("sqlite:///.db", connect_args={"check_same_thread": False})
SessionLocal = sessionmaker(autocommit=True, autoflush=True, bind=engine)

Base = declarative_base(bind=engine)

fake = Faker()

class User(Base):
    __tablename__ = "users"

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String, nullable=False)

Base.metadata.create_all()

app = FastAPI()

@app.on_event("startup")
def on_startup() -> None:
    session = SessionLocal()
    session.add_all([User(name=fake.name()) for _ in range(100)])
    session.flush()
    session.close()

def get_db() -> Iterator[Session]:
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

@app.get("/users/", response_model=page.Page)
def get_users(db: Session = Depends(get_db)) -> Any:
    return paginator.paginate(db = db, model = User, order_by= User.id, page = 0, size = 10 )

```


